# ProTenders Platform - Environment Variables
# Copy this file to .env.local and fill in your values

# ==========================================
# DATABASE (Render PostgreSQL)
# ==========================================
# Connection with pooling parameters for better performance and reliability
# IMPORTANT: Replace with your actual database credentials from Render
DATABASE_URL="postgresql://your_db_user:your_db_password@your-host.render.com/your_database?connection_limit=25&pool_timeout=30&connect_timeout=30"

# Connection Parameters Explained:
# - connection_limit=25: Maximum number of connections in the pool (optimal for production)
# - pool_timeout=30: Seconds to wait for connection from pool
# - connect_timeout=30: Seconds to wait for initial connection

# ==========================================
# RENDER API BACKEND
# ==========================================
NEXT_PUBLIC_API_BASE_URL="https://your-api-backend.onrender.com"

# ==========================================
# NEXTAUTH (Authentication)
# ==========================================
# Generate with: openssl rand -base64 32
NEXTAUTH_SECRET="your-super-secret-key-here"

# Your deployment URL
NEXTAUTH_URL="http://localhost:3000"
# For production: https://your-domain.com

# ==========================================
# ADMIN CREDENTIALS
# ==========================================
ADMIN_USERNAME="admin"
ADMIN_PASSWORD="your-secure-admin-password"

# ==========================================
# SECURITY & RATE LIMITING
# ==========================================
# JWT secret for API authentication (generate with: openssl rand -base64 32)
JWT_SECRET="your-jwt-secret-key-here"
# Rate limiting configuration
RATE_LIMIT_MAX="100"
RATE_LIMIT_WINDOW="60000"

# ==========================================
# OCDS API
# ==========================================
# Base domain for the South Africa eTenders OCDS API
# The app will call `${OCDS_BASE_URL}/api/OCDSReleases`
OCDS_BASE_URL="https://ocds-api.etenders.gov.za"

# ==========================================
# ENRICHMENT SEARCH TUNING
# ==========================================
# CRITICAL FOR PRODUCTION: Enable enrichment to get detailed categories, contacts, and documents

# ENRICH_SEARCH_STRATEGY: 'simple' or 'hybrid' (RECOMMENDED: hybrid)
#  - simple: tender number only (1 page), optional title if ENRICH_USE_TITLE=true
#  - hybrid: multi-page attempts with title and status fallbacks (8 strategies, higher success rate)
ENRICH_SEARCH_STRATEGY="hybrid"

# ENRICH_USE_TITLE: 'true' to allow title-based search (RECOMMENDED: true)
ENRICH_USE_TITLE="true"

# ENABLE_ENRICHMENT: 'true' to enable tender enrichment from eTenders API (CRITICAL FOR PRODUCTION)
# This fetches detailed categories, contact info, briefing details, and documents
ENABLE_ENRICHMENT="true"

# MAX_ENRICHMENT_PER_RUN: Maximum number of tenders to enrich per run
# - Set to 300 for production (avg 200-300 tenders/day, runs every 30min)
# - The system will dynamically adjust based on actual new tender count
# - End-of-day comprehensive sync can handle higher limits
MAX_ENRICHMENT_PER_RUN="300"

# ==========================================
# CRON JOB SECRET (for background sync)
# ==========================================
# Generate with: openssl rand -base64 32
CRON_SECRET="your-cron-secret-key-here"

# ==========================================
# INNGEST (Durable Background Jobs)
# ==========================================
# Inngest provides durable, timeout-free background job execution
# replacing the cron sync route with step-based execution
# Free tier: 50,000 executions/month

# INNGEST_SIGNING_KEY: Required for production (verifies requests from Inngest)
# Get from: https://app.inngest.com/env/{your-env}/manage/keys
INNGEST_SIGNING_KEY="signkey-prod-your-signing-key-here"

# INNGEST_EVENT_KEY: Required for sending events to Inngest
# Get from: https://app.inngest.com/env/{your-env}/manage/keys
INNGEST_EVENT_KEY="your-event-key-here"

# ==========================================
# EMAIL / SMTP CONFIGURATION (for alerts)
# ==========================================
# SMTP server configuration for sending email alerts
SMTP_HOST="smtp.gmail.com"
SMTP_PORT="587"
SMTP_SECURE="false"
SMTP_USER="your-email@gmail.com"
SMTP_PASS="your-app-password"
EMAIL_FROM="noreply@protenders.com"
ADMIN_EMAIL="admin@protenders.com"

# Note: For Gmail, you need to use an App Password
# Generate one at: https://myaccount.google.com/apppasswords

# ==========================================
# OPTIONAL: AI Services (Future)
# ==========================================
# OPENAI_API_KEY="sk-..."
# ANTHROPIC_API_KEY="sk-..."
# GOOGLE_CLOUD_PROJECT="your-project-id"

# ==========================================
# OPTIONAL: Analytics & Monitoring
# ==========================================
# Mixpanel Analytics (client-side tracking)
NEXT_PUBLIC_MIXPANEL_TOKEN="b0ef60c61d18697aba0a62a7833c63f7"
# Mixpanel API Secret (for server-side operations, if needed)
# MIXPANEL_API_SECRET="aa2a797dbec2a7b746a65f84134b8687"
# Mixpanel Project ID
# MIXPANEL_PROJECT_ID="3865072"
# Microsoft Clarity (user behavior analytics)
NEXT_PUBLIC_CLARITY_PROJECT_ID="txe2fn6lfc"
# NEXT_PUBLIC_GA_ID="G-XXXXXXXXXX"
# SENTRY_DSN="https://xxx@sentry.io/xxx"
